import * as valFunciones from '/js/functionSnippets/validarOferta.js';

"use strict";

/* Mostrar el botón de subir cambios */
document.getElementById('subirCambios').style.display = 'block';

const validarInputs = Array.from(document.querySelectorAll('.validarCampo'));
const mensajesError = Array.from(document.querySelectorAll('.mensajeError'));
const formulario = document.getElementById('formularioEdicion');

// Array de funciones predefinidas sin argumentos
const funcionesPredefinidas = [
    valFunciones.validarPuesto,
    valFunciones.valMenorQue20,
    valFunciones.validarSelect,
    valFunciones.valMenorQue20,
    valFunciones.validarSelect
];

// Bucle para agregar eventos a los inputs
for (let i = 0; i < funcionesPredefinidas.length; i++) {
    validarInputs[i].addEventListener('input', () => {
        funcionesPredefinidas[i](validarInputs[i], mensajesError[i]);
    });
}

// Evento para el botón de 'subirCambios'
document.getElementById('subirCambios').addEventListener('click', (e) => {
    e.preventDefault();

    let confirmarValidaciones = true;
    for (const i in funcionesPredefinidas) {
        confirmarValidaciones = funcionesPredefinidas[i](validarInputs[i], mensajesError[i]) && confirmarValidaciones;
    }

    if (!mensajesError.some(p => p.textContent.trim() !== '')) {
        formulario.submit();
    }
});
